var e=Object.defineProperty,t=(t,s,i)=>((t,s,i)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[s]=i)(t,"symbol"!=typeof s?s+"":s,i);import{r as s}from"./phaser-UvlxNa5i.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var i=s();class a extends i.Scene{constructor(){super("Boot")}preload(){this.load.image("background","assets/bg.png")}create(){this.scene.start("Preloader")}}class r{}t(r,"speed",300);class n extends Phaser.Physics.Arcade.Sprite{constructor(e,s,i,a){var n;super(e,s,i,a),t(this,"speed"),this.scene.physics.add.existing(this),this.scene.add.existing(this),null==(n=this.body)||n.setImmovable(!0).setAllowGravity(!1),this.speed=r.speed,this.move()}}class h extends n{constructor(e,t,s,i){super(e,t,s,i)}move(){this.speed=r.speed,this.setVelocityX(-this.speed)}checkReset(e){return this.x<=-760&&(this.x=e.x+760,!0)}}class c{constructor(e){t(this,"backgrounds",[]),t(this,"currentLast");for(var s=0;s<7;s++)this.backgrounds.push(new h(e,764*s,512,"room1"));this.currentLast=this.backgrounds[this.backgrounds.length-1]}update(){for(var e=0;e<this.backgrounds.length;e++)if(this.backgrounds[e].move(),this.backgrounds[e].checkReset(this.currentLast))return void(this.currentLast=this.backgrounds[e])}}class l{static createAnim(e,t,s,i,a,r=12,n=!0){e.anims.get(t)||e.anims.create({key:t,frames:e.anims.generateFrameNumbers(s,{start:i,end:a}),frameRate:r,repeat:n?-1:0})}static play(e,t){e.anims.play(t,!0)}static playAnim(e,t,s){e.list.forEach((e=>{l.play(e,t+"_"+e.name)})),s&&e.list[0].once("animationcomplete-"+t+"_head",(()=>s()))}}class o extends n{constructor(e,s,i,a){super(e,s,i,a),t(this,"destroyed",!1),this.CoinAnimInit(),l.play(this,"coin_flip"),e.physics.add.overlap(this,e.player,(()=>{this.destroy()}))}update(e,t){this.x<=-20&&(this.destroy(),this.destroyed=!0)}move(){this.setVelocityX(-this.speed)}CoinAnimInit(){l.createAnim(this.scene,"coin_flip","coin",0,7,12)}moveTo(e,t){this.x=e,this.y=t}}const d=[[0,1,1,0,1,1,0],[1,1,1,1,1,1,1],[1,1,1,1,1,1,1],[0,1,1,1,1,1,0],[0,0,1,1,1,0,0],[0,0,0,1,0,0,0]],p=class e{static test(e){const t=d;let s=600*Math.random()+100;this.spawnFromPattern(e,t,1500,s,32)}static spawnFromPattern(e,t,s,i,a=64){for(let r=0;r<t.length;r++)for(let n=0;n<t[r].length;n++)if(1===t[r][n]){const t=new o(e,s+n*a,i+r*a,"");this.coinList.push(t)}}static update(t,s){e.coinList=e.coinList.filter((e=>0==e.destroyed)),this.coinList.forEach((e=>{e.update(t,s)}))}};t(p,"coinList",[]);let y=p;class u extends n{constructor(e,t,s,i){var a;super(e,t,s,i),this.scene.physics.add.existing(this),this.scene.add.existing(this),null==(a=this.body)||a.setAllowGravity(!1),this.speed=r.speed,this.move(),this.scene.physics.add.overlap(this,this.scene.player,(()=>{var e;null==(e=this.parentContainer)||e.destroy()}))}move(){this.body.setVelocityX(-this.speed)}}class g extends u{constructor(e,t,s,i){super(e,t,s,i),this.headAnimCreate(),l.play(this,"elechead"),this.scale=1.5,this.scene.physics.add.overlap(this,this.scene.player,(()=>{var e;null==(e=this.parentContainer)||e.destroy()}))}headAnimCreate(){l.createAnim(this.scene,"elechead","elecOn",0,3)}}class m extends u{constructor(e,t,s,i){super(e,t,s,i),this.zapAnim(),l.play(this,"zapFX")}zapAnim(){l.createAnim(this.scene,"zapFX","zapFX",0,3)}setHeadTail(e,t){}}class f extends Phaser.GameObjects.Container{constructor(e,s,i,a,r){super(e,s,i),t(this,"head"),t(this,"tail"),t(this,"zapfx",[]),t(this,"headfx"),t(this,"tailfx"),this.animInit(),this.head=new g(e,0,0,""),this.tail=new g(e,a,r,""),this.calc(a,r),this.fxSetup(a,r),this.add([this.headfx,this.tailfx,...this.zapfx,this.head,this.tail]),this.rotateOrb(),e.add.existing(this)}rotateOrb(){const e=Phaser.Math.Angle.Between(this.head.x,this.head.y,this.tail.x,this.tail.y),t=Phaser.Math.RadToDeg(e);this.head.setAngle(t+90),this.tail.setAngle(t+180+90),this.zapfx.forEach((e=>{e.setAngle(t)}))}animInit(){l.createAnim(this.scene,"elecglow","elecOnGlow",0,15)}fxSetup(e,t){this.headfx=this.scene.physics.add.sprite(0,0,""),this.tailfx=this.scene.physics.add.sprite(e,t,""),this.headfx.body.setAllowGravity(!1),this.tailfx.body.setAllowGravity(!1),l.play(this.headfx,"elecglow"),l.play(this.tailfx,"elecglow"),this.headfx.body.setVelocityX(-r.speed),this.tailfx.body.setVelocityX(-r.speed)}calc(e,t){const s=Math.sqrt(e*e+t*t),i=Math.floor(s/32),a=Phaser.Math.Angle.Between(0,0,e,t),n=32*Math.cos(a),h=32*Math.sin(a);for(let c=0;c<=i;c++){const e=n*c,t=h*c,s=new m(this.scene,e,t,"");if(s.setAngle(Phaser.Math.RadToDeg(a)),s.body instanceof Phaser.Physics.Arcade.Body){s.body.setAllowGravity(!1),s.body.setVelocityX(-r.speed);const e=s.width,t=s.height;s.body.setSize(e,t/4),s.body.setOffset(0,t/2-t/8)}this.zapfx.push(s)}}}class b{constructor(e,s){t(this,"player"),t(this,"scene"),this.player=s,this.scene=e}jetLaunch(){this.scene.input.activePointer.isDown?this.player.body.setAccelerationY(-3e3):this.player.body.setAccelerationY(0)}}class w extends Phaser.GameObjects.Container{constructor(e){super(e.scene),t(this,"playerHead"),t(this,"playerBody"),t(this,"playerJetpack"),this.scene=e.scene,this.addHead(),this.addBody(),this.addJetPack(),e.add(this),this.scale=4}addBody(){this.playerBody=this.scene.add.sprite(10,5,"player_body"),this.add(this.playerBody),this.playerBody.setName("body")}addHead(){this.playerHead=this.scene.add.sprite(10,-8,"player_head"),this.add(this.playerHead),this.playerHead.setName("head")}addJetPack(){this.playerJetpack=this.scene.add.sprite(0,5,"player_jetpack"),this.add(this.playerJetpack),this.playerJetpack.setName("jetpack")}}class x{constructor(e){t(this,"player"),this.player=e,this.animInit()}}class A extends x{constructor(){super(...arguments),t(this,"falling",!1)}onEnter(){}onUpdate(...e){this.player.controller.jetLaunch(),this.checkFall(),this.falling||l.playAnim(this.player.playerSprite,"flyup")}onExit(){}animInit(){this.flyUpAnimInit(),this.flyDownAnimInit()}flyUpAnimInit(){l.createAnim(this.player.scene,"flyup_head","player_head",4,7),l.createAnim(this.player.scene,"flyup_body","player_body",4,7),l.createAnim(this.player.scene,"flyup_jetpack","player_jetpack",4,7)}flyDownAnimInit(){l.createAnim(this.player.scene,"flydown_head","player_head",8,11,12,!1),l.createAnim(this.player.scene,"flydown_body","player_body",8,11,12,!1),l.createAnim(this.player.scene,"flydown_jetpack","player_jetpack",8,11,12,!1)}checkFall(){const e=this.player.body;e.velocity.y>=10&&!this.falling&&(this.falling=!0,l.playAnim(this.player.playerSprite,"flydown")),e.velocity.y<=0&&(this.falling=!1)}}class k extends x{constructor(e){super(e)}onEnter(){l.playAnim(this.player.playerSprite,"landing",(()=>{l.playAnim(this.player.playerSprite,"walking")}))}onUpdate(...e){this.player.controller.jetLaunch(),this.player.body.velocity.y<0&&this.player.switchState("flying")}onExit(){}animInit(){this.landingInit(),this.walkingAnimInit()}walkingAnimInit(){l.createAnim(this.player.scene,"walking_head","player_head",0,3),l.createAnim(this.player.scene,"walking_body","player_body",0,3),l.createAnim(this.player.scene,"walking_jetpack","player_jetpack",0,3)}landingInit(){l.createAnim(this.player.scene,"landing_head","player_head",12,15,12,!1),l.createAnim(this.player.scene,"landing_body","player_body",12,15,12,!1),l.createAnim(this.player.scene,"landing_jetpack","player_jetpack",12,15,12,!1)}}class S extends Phaser.GameObjects.Container{constructor(e,s,i){super(e,s,i),t(this,"playerSprite"),t(this,"currentState"),t(this,"controller"),t(this,"states"),this.setupBody(),this.setUpSprite(),this.stateInit(),this.controller=new b(this.scene,this),this.scene.add.existing(this),this.switchState("flying"),this.scale=.8}update(...e){super.update(e),this.currentState&&this.currentState.onUpdate(e)}switchState(e){this.currentState!==this.states[e]&&(this.currentState&&this.currentState.onExit(),this.currentState=this.states[e],this.currentState.onEnter())}setUpSprite(){this.playerSprite=new w(this)}setupBody(){this.scene.physics.add.existing(this),this.body.setCollideWorldBounds(!0).setSize(70,128).setOffset(0,-64)}stateInit(){this.states={walking:new k(this),flying:new A(this)}}}class v extends Phaser.Scene{constructor(){super("GameScene"),t(this,"bg"),t(this,"player"),t(this,"progress",0)}preload(){this.LoadBodySprite(),this.LoadHeadSprite(),this.LoadJetPack(),this.LoadCoin(),this.LoadElec(),this.load.image("room1","assets/Levels/Room1/room1_1.png")}create(){this.bg=new c(this),this.player=new S(this,100,300),this.createBot(),this.createTop(),new f(this,2e3,500,400,300),y.test(this)}update(e,t){y.update(e,t),this.bg.update(),this.player.update(),this.progress+=t,this.progress>=2e3&&(r.speed+=5,this.progress=0,y.test(this))}createBot(){let e=new Phaser.GameObjects.Rectangle(this,400,800,800,40);this.physics.add.existing(e),this.physics.add.collider(e,this.player,(()=>{this.player.switchState("walking")})),e.body.setImmovable(!0).setAllowGravity(!1),this.add.existing(e)}createTop(){let e=new Phaser.GameObjects.Rectangle(this,400,250,800,40);this.physics.add.existing(e),this.physics.add.collider(e,this.player),e.body.setImmovable(!0).setAllowGravity(!1),this.add.existing(e)}LoadBodySprite(){this.load.spritesheet("player_body","assets/Characters/Barry/defaultBody.png",{frameWidth:32,frameHeight:32})}LoadHeadSprite(){this.load.spritesheet("player_head","assets/Characters/Barry/defaultHead.png",{frameWidth:32,frameHeight:32})}LoadJetPack(){this.load.spritesheet("player_jetpack","assets/Characters/Jetpacks/jetpackDefault.png",{frameWidth:32,frameHeight:44})}LoadCoin(){this.load.spritesheet("coin","assets/Entities/coin_sheet.png",{frameWidth:32,frameHeight:32})}LoadElec(){this.load.spritesheet("elecOn","assets/Obstacles/Zapper/orbAnim.png",{frameWidth:62,frameHeight:42}),this.load.spritesheet("elecOnGlow","assets/Obstacles/Zapper/RegularZappers/glow.png",{frameWidth:128,frameHeight:128}),this.load.spritesheet("zapFX","assets/Obstacles/Zapper/RegularZappers/zapEffect.png",{frameWidth:32,frameHeight:117})}}class _ extends i.Scene{constructor(){super("MainMenu"),t(this,"background"),t(this,"logo"),t(this,"title")}preload(){this.load.image("splash","assets/Splash/loading_screen.png")}create(){const{width:e,height:t}=this.scale;this.background=this.add.image(e/2,t/2,"splash");const s=this.background.width,i=this.background.height,a=this.scale.width/s,r=this.scale.height/i,n=Math.max(a,r);this.background.setScale(n),this.background.setScrollFactor(0),this.input.once("pointerdown",(()=>{this.scene.start("GameScene")}))}}class P extends i.Scene{constructor(){super("Preloader")}init(){this.add.image(512,384,"background"),this.add.rectangle(512,384,468,32).setStrokeStyle(1,16777215);const e=this.add.rectangle(282,384,4,28,16777215);this.load.on("progress",(t=>{e.width=4+460*t}))}preload(){this.load.setPath("assets"),this.load.image("logo","logo.png")}create(){this.scene.start("MainMenu")}}const L={type:i.AUTO,width:1920,height:1024,parent:"game-container",backgroundColor:"#028af8",scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},render:{antialias:!1,pixelArt:!0,roundPixels:!0},scene:[a,P,_,v],physics:{default:"arcade",arcade:{gravity:{x:0,y:900},debug:!0}}};document.addEventListener("DOMContentLoaded",(()=>{new i.Game({...L,parent:"game-container"})}));
